.. note::

    こんにちは、SunFounderのRaspberry Pi & Arduino & ESP32愛好家コミュニティへようこそ！Facebook上でRaspberry Pi、Arduino、ESP32についてもっと深く掘り下げ、他の愛好家と交流しましょう。

    **参加する理由は？**

    - **エキスパートサポート**：コミュニティやチームの助けを借りて、販売後の問題や技術的な課題を解決します。
    - **学び＆共有**：ヒントやチュートリアルを交換してスキルを向上させましょう。
    - **独占的なプレビュー**：新製品の発表や先行プレビューに早期アクセスしましょう。
    - **特別割引**：最新製品の独占割引をお楽しみください。
    - **祭りのプロモーションとギフト**：ギフトや祝日のプロモーションに参加しましょう。

    👉 私たちと一緒に探索し、創造する準備はできていますか？[|link_sf_facebook|]をクリックして今すぐ参加しましょう！

2. PiDog のキャリブレーション
=============================

**概要**

PiDog のキャリブレーションは、安定かつ効率的に動作させるための重要なステップです。  
このプロセスにより、組み立てや構造上の誤差によるバランスの崩れや不正確さを修正できます。  
以下の手順に従って操作し、PiDog がスムーズに歩行し、期待通りに動作するようにしましょう。

.. raw:: html

   <video width="600" loop autoplay muted>
      <source src="../_static/video/calibrate_before.mp4" type="video/mp4">
      Your browser does not support the video tag.
   </video>

もし偏差角度が大きすぎる場合は、:ref:`py_servo_adjust` に戻り、サーボ角度を 0° に設定し、説明に従って PiDog を再組み立てしてください。

**キャリブレーション動画**

詳しいガイドが必要な場合は、キャリブレーション手順の全動画をご参照ください。  
この動画では、PiDog を正確にキャリブレーションする方法を段階的にわかりやすく解説しています。

.. note::

   PiDog キットには 90° または 60° のキャリブレーション定規が付属しています。  
   動画では 90° の定規を使用していますが、60° の場合も手順はほぼ同じです。  
   下記の図解付きステップも参考にしてください。
    
    .. image:: img/cali_ruler.png
         :width: 400
         :align: center

.. raw:: html

    <iframe width="700" height="500" src="https://www.youtube.com/embed/witCWeoHTdk?si=g8_RZDUkfjdwbLZu&amp;start=871&end=1160" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

**手順**

具体的な操作手順は以下の通りです：

#. PiDog を平らな台の上に置きます。

   .. image:: img/place-pidog.JPG

#. PiDog のサンプルコードディレクトリに移動し、 ``0_calibration.py`` スクリプトを実行します。

   .. raw:: html

        <run></run>

   .. code-block::

        cd ~/pidog/examples
        sudo python3 0_calibration.py
        
#. スクリプトを実行すると、ターミナルにインタラクティブな画面が表示されます。  
   お持ちのキャリブレーション定規の種類に応じて選択してください：  
   90° の場合は 1 を選択し、60° の場合は 2 を選択します。

    .. image:: img/CALI.slt.1.png

#. 選択後、以下のようなキャリブレーション画面が表示されます：

    .. image:: img/CALI.slt.2.png

**60° 定規を使用する場合**

#. 下図のように **キャリブレーション定規（アクリル C 板）** を水平面に長辺を置くように配置します。  
   ターミナルで ``1`` を押し、 ``w`` および ``s`` キーで縁が図示位置に合うよう調整します。

    .. image:: img/CALI.60.1.JPG

#. 下図のように **キャリブレーション定規** を再配置します。  
   ターミナルで ``2`` を押し、再び ``w`` および ``s`` キーで微調整します。

    .. image:: img/CALI.60.2.JPG

#. サーボ 3 から 8 までのキャリブレーションを繰り返し、PiDog の 4 本すべての脚が正確に調整されていることを確認します。

**90° 定規を使用する場合**

#. 図のように **キャリブレーション定規（アクリル C 板）** を配置します。  
   ターミナルで ``1`` を押し、 ``w`` および ``s`` キーで縁が図示位置に合うよう調整します。

    .. image:: img/CALI-1.2.png

#. **キャリブレーション定規** を再び図のように配置します。  
   ターミナルで ``2`` を押し、 ``w`` および ``s`` キーで再調整します。

    .. image:: img/CALI-2.2.png

#. サーボ 3 から 8 までのキャリブレーション操作を繰り返し、PiDog の 4 本すべての脚を調整します。

**キャリブレーション完了**

- すべてのサーボのキャリブレーションが完了したら、PiDog の歩行または姿勢サンプルコードを再実行し、動作が安定しているかを確認します。  
- ずれがある場合は、再度キャリブレーションプログラムに入り、微調整を行ってください。  
- 初回組み立て後は必ずこの手順を行うことをおすすめします。これにより、今後の動作が安定します。

.. tip::

   再キャリブレーションを避けるために、完了後はサーボ角度を記録するか、設定ファイルをエクスポートしておきましょう。  
   これにより、次回以降すばやく元の状態を復元できます。
